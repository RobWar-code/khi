<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="icon.png" sizes="32x32" type="image/x-icon">
    <link rel="stylesheet" href="src/styles/styles.css">
    <meta name="description" content="Combative Crossword Game">
    <meta name="keywords" content="game, crossword">
    <title>Khi - Crossword Combat</title>
</head>
<body>

    <!-- Introduction -->
     <div id="introDiv">
        <h1>Khi Introduction</h1>
        <p>
            The game is played by one player (blue) versus the computer 
            (black). The aim is to create two intersecting crosswords 
            in black and blue that span the width of the board. 
        </p>
        <p>
            The first player to reach the opposite side with his letter 
            tiles is the winner. The score for the game is based on the 
            number of tiles laid to win the game, fewer scores higher.
        </p>
        <p>
            The first word is layed such that one tile of the word is set 
            on the starred square on the side of the board. The player's 
            is on the left, the computer's on the right.
        </p>
        <p>
            Apart from the first word, which begins at the edge, tiles 
            must be joined to at least one tile of the player's colour, 
            already on the board.
        </p>
        <p>
            Tiles must be layed on the same row or column, possibly passing
            across or through previously layed tiles.
        </p>
        <p>
            When a word crosses through the opponent's tiles or makes a new
            word with them, the word affected is changed to the player's 
            colour.
        </p>
        <p>
            To place the tiles from the rack, click/touch a tile on the rack
            and then click/touch the board where you want it to go. To complete
            the word click the Play Word button below the rack.
        </p>
        <button class="textButton" id="introDismiss">Dismiss</button>
     </div>

    <!-- Menu -->
    <table id="menuTable">
        <tr id="menuRow">
            <td id="menuLogoCell">
                <img src="assets/mainLogo.png" width="64" height="32">
            </td>
            <td id="menuTitleCell">Crossword Combat Game</td>
            <td id="menuOptionsCell">
                <button class="menuBtn" id="introBtn">Intro</button>
                <button class="menuBtn" id="homeBtn">Home</button>
            </td>
        </tr>
    </table>

    
    <!-- Board -->
    <div class="row">
        <div class="col" id="boardDiv">
            <table id="board">

            </table>
        </div>
                
        <div class="col" id="infoDiv">
            <div id="rackPlayDiv">
                <table id="rackTable">
                    <tr>
                        <td class="rackCell" id="rackCell0" onclick="rack.tileClick(event);"></td>
                        <td class="rackCell" id="rackCell1" onclick="rack.tileClick(event);"></td>
                        <td class="rackCell" id="rackCell2" onclick="rack.tileClick(event);"></td>
                        <td class="rackCell" id="rackCell3" onclick="rack.tileClick(event);"></td>
                        <td class="rackCell" id="rackCell4" onclick="rack.tileClick(event);"></td>
                        <td class="rackCell" id="rackCell5" onclick="rack.tileClick(event);"></td>
                        <td class="rackCell" id="rackCell6" onclick="rack.tileClick(event);"></td>
                    </tr>
                </table>
            </div>

            <div id="gameEndDiv">
                <h2>**Game Over**</h2>
                <p>Scores</p>
                <table id="scoreTable">
                    <tr>
                        <th></th>
                        <th>Player</td>
                        <th>Computer</td>
                    </tr>
                    <tr>
                        <td>Tile Score</td>
                        <td class="num" id="tileScore0"></td>
                        <td class="num" id="tileScore1"></td>
                    </tr>
                    <tr>
                        <td>Penalties</td>
                        <td class="num" id="penalty0"></td>
                        <td class="num" id="penalty1"></td>
                    </tr>
                    <tr>
                        <td>Bonus</td>
                        <td class="num" id="bonus0"></td>
                        <td class="num" id="bonus1"></td>
                    </tr>
                    <tr>
                        <td>Total</td>
                        <td class="num" id="totalScore0"></td>
                        <td class="num" id="totalScore1"></td>
                    </tr>
                </table>
                <p id="winMessage"></p>
                <button class="textButton" id="playAgain">Play Again</button>
            </div>
            
            <div id="gamePlayOptionsDiv">
                <h2>Game Play Options</h2>
                <button class="textButton" id="easyGame">Easy</button>
                <button class="textButton" id="moderateGame">Moderate</button>
                <button class="textButton" id="hardGame">Hard</button>
            </div>

            <div id="playOptionsDiv">
                <button class="textButton opt" id="passOpt">Pass</button>
                <button class="textButton opt" id="playWordOpt">Play Word</button>
                <button class="textButton opt" id="changeTilesOpt">Change Tiles (-10)</button>
                <button class="textButton opt" id="restartOpt">Restart Game</button>
            </div>

            <div id="scoresDiv">
                <h2 id="scoresTitle">Current Scores</h2>
                <p>You: <span id="playerScore"></span> Computer: <span id="computerScore"></span></p>
            </div>
            
            <div id="starLetterDiv">
                <h3>Select A Letter</h3>
                <table id="starLetterTable">
                    <tr>
                        <td onclick="rack.selectStarLetter(event)">A</td>
                        <td onclick="rack.selectStarLetter(event)">B</td>
                        <td onclick="rack.selectStarLetter(event)">C</td>
                        <td onclick="rack.selectStarLetter(event)">D</td>
                        <td onclick="rack.selectStarLetter(event)">E</td>
                        <td onclick="rack.selectStarLetter(event)">F</td>
                        <td onclick="rack.selectStarLetter(event)">G</td>
                        <td onclick="rack.selectStarLetter(event)">H</td>
                        <td onclick="rack.selectStarLetter(event)">I</td>
                        <td onclick="rack.selectStarLetter(event)">J</td>
                        <td onclick="rack.selectStarLetter(event)">K</td>
                        <td onclick="rack.selectStarLetter(event)">L</td>
                        <td onclick="rack.selectStarLetter(event)">M</td>
                    </tr>
                    <tr>
                        <td onclick="rack.selectStarLetter(event)">N</td>
                        <td onclick="rack.selectStarLetter(event)">O</td>
                        <td onclick="rack.selectStarLetter(event)">P</td>
                        <td onclick="rack.selectStarLetter(event)">Q</td>
                        <td onclick="rack.selectStarLetter(event)">R</td>
                        <td onclick="rack.selectStarLetter(event)">S</td>
                        <td onclick="rack.selectStarLetter(event)">T</td>
                        <td onclick="rack.selectStarLetter(event)">U</td>
                        <td onclick="rack.selectStarLetter(event)">V</td>
                        <td onclick="rack.selectStarLetter(event)">W</td>
                        <td onclick="rack.selectStarLetter(event)">X</td>
                        <td onclick="rack.selectStarLetter(event)">Y</td>
                        <td onclick="rack.selectStarLetter(event)">Z</td>
                    </tr>
                </table>
            </div>

            <div id="statusDiv"></div>
        </div>
    </div>

<script src="src/game.js"></script>
<script src="src/board.js"></script>
<script src="src/computer.js"></script>
<script src="src/rack.js"></script>
<script src="src/tileSet.js"></script>
<script src="src/wordFuncs.js"></script>
<script src="src/boardTest.js"></script>
<script>
    let gameStarted = false;
    let testGame = false;

    // Events
    let introDismiss = document.getElementById("introDismiss");
    let introBtn = document.getElementById("introBtn");
    let homeBtn = document.getElementById("homeBtn");
    let playWordOpt = document.getElementById("playWordOpt");
    let passOpt = document.getElementById("passOpt");
    let changeTilesOpt = document.getElementById("changeTilesOpt");
    let restartOpt = document.getElementById("restartOpt");
    let playAgain = document.getElementById("playAgain");
    let easyGame = document.getElementById("easyGame");
    let moderateGame = document.getElementById("moderateGame");
    let hardGame = document.getElementById("hardGame");

    introBtn.addEventListener('click', () => {
        if (!gameStarted) return;
        document.getElementById("introDiv").style.display = "block";
    });

    homeBtn.addEventListener('click', () => {
        window.location = '../index.html';
    });

    introDismiss.addEventListener('click', () => {
        if (!gameStarted) {
            game.presentGamePlayOptions();
            gameStarted = true;
        }
        else {
            document.getElementById("introDiv").style.display = "none";
        }
    });

    playWordOpt.addEventListener("click", () => {
        if (rack.lettersPlaced[0].length === 0) {
            return;
        }
        game.playWord(0);
    });

    passOpt.addEventListener("click", () => {game.doPlayerPass()});

    changeTilesOpt.addEventListener("click", () => {rack.changeTiles(game.userNum)});
    
    restartOpt.addEventListener("click", () => {game.presentGamePlayOptions()});

    playAgain.addEventListener("click", () => {game.presentGamePlayOptions()});

    easyGame.addEventListener("click", () => {game.restartGame("easy")});

    moderateGame.addEventListener("click", () => {game.restartGame("moderate")});

    hardGame.addEventListener("click", () => {game.restartGame("hard")});

    // Initialisation
    wordFuncs.loadWordList();
    board.initBoard();

</script>
</body>
</html>